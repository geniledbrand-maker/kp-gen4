<!-- ============================================================
     –ú–û–î–ê–õ–¨–ù–û–ï –û–ö–ù–û –ú–ê–°–°–û–í–û–ì–û –î–û–ë–ê–í–õ–ï–ù–ò–Ø –¢–û–í–ê–†–û–í (Enhanced)
     ============================================================ -->
<div id="bulkAddModal" class="modal-overlay bulk-modal-overlay">
    <div class="modal-content bulk-modal-content" onclick="event.stopPropagation()">
        <!-- –ö–Ω–æ–ø–∫–∞ –∑–∞–∫—Ä—ã—Ç–∏—è -->
        <button class="modal-close-btn bulk-modal-close" onclick="closeBulkAddModal()">&times;</button>

        <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ —Å –∏–∫–æ–Ω–∫–æ–π –∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–æ–π -->
        <div class="bulk-header">
            <div class="bulk-header-left">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <rect x="3" y="3" width="18" height="18" rx="2"/>
                    <path d="M9 9h6M9 13h6M9 17h6"/>
                </svg>
                <h2>–ú–∞—Å—Å–æ–≤–æ–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–æ–≤</h2>
            </div>
            <div class="bulk-stats">
                <div class="stat-item">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
                        <path d="M14 2v6h6"/>
                        <path d="M9 15h6"/>
                    </svg>
                    <span id="bulkLineCount">0 —Å—Ç—Ä–æ–∫</span>
                </div>
                <div class="stat-item">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/>
                        <circle cx="8.5" cy="7" r="4"/>
                        <path d="M20 8v6M23 11h-6"/>
                    </svg>
                    <span id="bulkArticleCount">0 –∞—Ä—Ç–∏–∫—É–ª–æ–≤</span>
                </div>
            </div>
        </div>

        <!-- –û—Å–Ω–æ–≤–Ω–æ–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ -->
        <div class="bulk-body">
            <!-- –ü–æ–¥—Å–∫–∞–∑–∫–∞ —Å –ø—Ä–∏–º–µ—Ä–∞–º–∏ —Ñ–æ—Ä–º–∞—Ç–æ–≤ -->
            <div class="help-banner">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <circle cx="12" cy="12" r="10"/>
                    <path d="M12 16v-4M12 8h.01"/>
                </svg>
                <div class="help-content">
                    <div class="help-title">–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã:</div>
                    <div class="help-examples">
                        <span class="example-code">08575</span>
                        <span class="example-code">08575_smart x 5</span>
                        <span class="example-code">08575;10</span>
                        <span class="example-code">08575 * 3</span>
                    </div>
                </div>
            </div>

            <!-- –¢–µ–∫—Å—Ç–æ–≤–æ–µ –ø–æ–ª–µ —Å Drag & Drop -->
            <div class="textarea-wrapper" id="bulkTextareaWrapper">
                <textarea
                        id="bulkModalTextarea"
                        placeholder="–í—Å—Ç–∞–≤—å—Ç–µ –∞—Ä—Ç–∏–∫—É–ª—ã –ø–æ—Å—Ç—Ä–æ—á–Ω–æ –∏–ª–∏ –ø–µ—Ä–µ—Ç–∞—â–∏—Ç–µ —Ñ–∞–π–ª —Å—é–¥–∞...&#10;&#10;–ü—Ä–∏–º–µ—Ä—ã:&#10;08575&#10;08575 x 2&#10;08575;5"
                ></textarea>
                <div class="dropzone-overlay">
                    <div class="dropzone-content">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
                            <polyline points="17 8 12 3 7 8"/>
                            <line x1="12" y1="3" x2="12" y2="15"/>
                        </svg>
                        <div style="font-weight: 600;">–û—Ç–ø—É—Å—Ç–∏—Ç–µ —Ñ–∞–π–ª –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏</div>
                        <div style="font-size: 12px; color: #999; margin-top: 4px;">–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è: .txt, .csv, .xlsx</div>
                    </div>
                </div>
            </div>

            <!-- –ü–∞–Ω–µ–ª—å –±—ã—Å—Ç—Ä—ã—Ö –¥–µ–π—Å—Ç–≤–∏–π -->
            <div class="quick-actions">
                <button class="quick-btn" id="btnBulkUploadFile">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
                        <polyline points="17 8 12 3 7 8"/>
                        <line x1="12" y1="3" x2="12" y2="15"/>
                    </svg>
                    –ó–∞–≥—Ä—É–∑–∏—Ç—å —Ñ–∞–π–ª
                </button>

                <button class="quick-btn" id="btnBulkClearText">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <polyline points="3 6 5 6 21 6"/>
                        <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"/>
                    </svg>
                    –û—á–∏—Å—Ç–∏—Ç—å
                </button>

                <button class="quick-btn" id="btnBulkFormatText">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <polyline points="16 18 22 12 16 6"/>
                        <polyline points="8 6 2 12 8 18"/>
                    </svg>
                    –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞—Ç—å
                </button>

                <div class="templates-dropdown">
                    <button class="quick-btn" id="btnBulkTemplates">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"/>
                            <polyline points="17 21 17 13 7 13 7 21"/>
                            <polyline points="7 3 7 8 15 8"/>
                        </svg>
                        –®–∞–±–ª–æ–Ω—ã ‚ñº
                    </button>
                    <div class="templates-menu" id="bulkTemplatesMenu">
                        <div class="template-item" data-template="led">
                            <div class="template-name">LED –ø–∞–Ω–µ–ª–∏ (–æ—Ñ–∏—Å)</div>
                            <div class="template-count">8 –ø–æ–∑–∏—Ü–∏–π</div>
                        </div>
                        <div class="template-item" data-template="outdoor">
                            <div class="template-name">–£–ª–∏—á–Ω–æ–µ –æ—Å–≤–µ—â–µ–Ω–∏–µ</div>
                            <div class="template-count">12 –ø–æ–∑–∏—Ü–∏–π</div>
                        </div>
                        <div class="template-item" data-template="warehouse">
                            <div class="template-name">–°–∫–ª–∞–¥ (—Å—Ç–∞–Ω–¥–∞—Ä—Ç)</div>
                            <div class="template-count">15 –ø–æ–∑–∏—Ü–∏–π</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- –û–ø—Ü–∏–∏ -->
            <div class="options-row">
                <label class="checkbox-label">
                    <input type="checkbox" id="bulkAddAsSeparate" checked>
                    <span>–î–æ–±–∞–≤–ª—è—Ç—å –¥—É–±–ª–∏ –∫–∞–∫ –æ—Ç–¥–µ–ª—å–Ω—ã–µ –ø–æ–∑–∏—Ü–∏–∏</span>
                </label>

                <label class="checkbox-label">
                    <input type="checkbox" id="bulkAutoValidate" checked>
                    <span>–ü—Ä–æ–≤–µ—Ä—è—Ç—å –Ω–∞–ª–∏—á–∏–µ –ø–µ—Ä–µ–¥ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ–º</span>
                </label>
            </div>

            <!-- –ü—Ä–µ–≤—å—é (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) -->
            <div class="preview-section" id="bulkPreviewSection">
                <div class="preview-header">
                    <div class="preview-title">üìã –ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä (–±—É–¥–µ—Ç –¥–æ–±–∞–≤–ª–µ–Ω–æ):</div>
                    <button class="quick-btn" id="btnBulkClosePreview" style="padding: 4px 8px;">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="width: 12px; height: 12px;">
                            <line x1="18" y1="6" x2="6" y2="18"/>
                            <line x1="6" y1="6" x2="18" y2="18"/>
                        </svg>
                    </button>
                </div>
                <div class="preview-list" id="bulkPreviewList">
                    <!-- –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π –∫–æ–Ω—Ç–µ–Ω—Ç -->
                </div>
            </div>
        </div>

        <!-- –ö–Ω–æ–ø–∫–∏ –¥–µ–π—Å—Ç–≤–∏–π -->
        <div class="bulk-footer">
            <button class="bulk-btn bulk-btn-secondary" onclick="closeBulkAddModal()">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <line x1="18" y1="6" x2="6" y2="18"/>
                    <line x1="6" y1="6" x2="18" y2="18"/>
                </svg>
                –û—Ç–º–µ–Ω–∏—Ç—å
            </button>

            <button class="bulk-btn bulk-btn-primary" id="btnBulkAddFromList">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <line x1="12" y1="5" x2="12" y2="19"/>
                    <line x1="5" y1="12" x2="19" y2="12"/>
                </svg>
                –î–æ–±–∞–≤–∏—Ç—å –∏–∑ —Å–ø–∏—Å–∫–∞
            </button>
        </div>
    </div>
</div>

<!-- –°–∫—Ä—ã—Ç—ã–π input –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–∞–π–ª–æ–≤ -->
<input type="file" id="bulkFileInput" class="file-input" accept=".txt,.csv,.xlsx,.xls" style="display:none;">