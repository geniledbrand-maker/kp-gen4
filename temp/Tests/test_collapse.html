<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–¢–µ—Å—Ç —Å–≤–æ—Ä–∞—á–∏–≤–∞–Ω–∏—è –ö–ü</title>
    <style>
        :root {
            --brand-main: #722e85;
            --border-light: #e0e0e0;
            --space-md: 16px;
            --space-lg: 24px;
            --radius-lg: 12px;
            --transition-base: 0.2s ease;
        }

        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            background: #f3f4f6;
        }

        .kp-info-wrapper {
            background: #fff;
            border-radius: var(--radius-lg);
            margin-bottom: var(--space-lg);
            box-shadow: 0 2px 8px rgba(0,0,0,.06);
        }

        .kp-info-header-row {
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 16px;
            padding: 20px 24px;
            background: #fafafa;
            border-bottom: 1px solid var(--border-light);
        }

        .kp-info-actions {
            padding: 16px 24px;
            background: #f8f9fa;
            border-bottom: 1px solid var(--border-light);
        }

        .btn-kp-info-toggle {
            display: inline-flex;
            align-items: center;
            gap: 10px;
            padding: 12px 20px;
            background: var(--brand-main);
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
            transition: all var(--transition-base);
        }

        .btn-kp-info-toggle:hover {
            background: #5b3a72;
        }

        .toggle-arrow {
            transition: transform var(--transition-base);
        }

        .btn-bitrix-profile {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 10px 16px;
            background: #007bff;
            color: white;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            transition: all var(--transition-base);
        }

        .btn-bitrix-profile:hover {
            background: #0056b3;
        }

        .btn-bitrix-profile.state-stale {
            background: #dc3545;
        }

        .btn-bitrix-profile.state-fresh {
            background: #28a745;
        }

        .kp-info-content {
            padding: 24px;
        }

        .kp-info-content--hidden {
            display: none;
        }

        .kp-info-content--visible {
            display: block;
        }

        .form-field {
            margin-bottom: 16px;
        }

        .form-field label {
            display: block;
            margin-bottom: 4px;
            font-weight: 500;
        }

        .form-field input {
            width: 100%;
            padding: 8px 12px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 14px;
        }

        .test-info {
            background: #e7f3ff;
            border: 1px solid #b3d9ff;
            border-radius: 8px;
            padding: 16px;
            margin-bottom: 20px;
        }

        .test-info h3 {
            margin: 0 0 8px 0;
            color: #0066cc;
        }

        .test-info p {
            margin: 4px 0;
            color: #333;
        }

        @media (max-width: 768px) {
            .kp-info-header-row {
                padding: 16px !important;
            }

            .kp-info-actions {
                padding: 12px 16px !important;
            }

            .btn-kp-info-toggle,
            .btn-bitrix-profile {
                width: 100% !important;
                justify-content: center !important;
            }
        }
    </style>
</head>
<body>
    <div class="test-info">
        <h3>üß™ –¢–µ—Å—Ç —Å–≤–æ—Ä–∞—á–∏–≤–∞–Ω–∏—è –ö–ü</h3>
        <p><strong>–û–∂–∏–¥–∞–µ–º–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ:</strong></p>
        <p>‚Ä¢ –ö–Ω–æ–ø–∫–∞ "–ó–∞–≥—Ä—É–∑–∏—Ç—å –∏–∑ –ø—Ä–æ—Ñ–∏–ª—è –ë–∏—Ç—Ä–∏–∫—Å" –¥–æ–ª–∂–Ω–∞ —Å–≤–æ—Ä–∞—á–∏–≤–∞—Ç—å—Å—è –≤–º–µ—Å—Ç–µ —Å —Ñ–æ—Ä–º–æ–π</p>
        <p>‚Ä¢ –ù–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö (—à–∏—Ä–∏–Ω–∞ < 768px) –∫–Ω–æ–ø–∫–∏ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –Ω–∞ –≤—Å—é —à–∏—Ä–∏–Ω—É</p>
        <p>‚Ä¢ –°—Ç—Ä–µ–ª–∫–∞ –¥–æ–ª–∂–Ω–∞ –ø–æ–≤–æ—Ä–∞—á–∏–≤–∞—Ç—å—Å—è –ø—Ä–∏ —Å–≤–æ—Ä–∞—á–∏–≤–∞–Ω–∏–∏</p>
    </div>

    <!-- –ë–ª–æ–∫ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –ö–ü -->
    <div class="kp-info-wrapper">
        <!-- –ö–Ω–æ–ø–∫–∞ "–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ö–ü" (–≤—Å–µ–≥–¥–∞ –≤–∏–¥–Ω–∞) -->
        <div class="kp-info-header-row">
            <button type="button" class="btn-kp-info-toggle" onclick="toggleKpInfo()">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                    <path d="M11 7h2v2h-2zm0 4h2v6h-2zM12 2a10 10 0 100 20 10 10 0 000-20z"/>
                </svg>
                <span>–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ö–ü</span>
                <svg class="toggle-arrow" width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                    <path d="M7 10l5 5 5-5z"/>
                </svg>
            </button>
        </div>

        <!-- –°–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ñ–æ—Ä–º—ã (—Å–≤–æ—Ä–∞—á–∏–≤–∞–µ—Ç—Å—è) -->
        <div class="kp-info-content kp-info-content--visible" id="kpInfoContent">
            <!-- –ö–Ω–æ–ø–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∏–∑ –ø—Ä–æ—Ñ–∏–ª—è –ë–∏—Ç—Ä–∏–∫—Å (—Ç–µ–ø–µ—Ä—å –≤–Ω—É—Ç—Ä–∏ —Å–≤–æ—Ä–∞—á–∏–≤–∞–µ–º–æ–≥–æ –±–ª–æ–∫–∞) -->
            <div class="kp-info-actions">
                <button type="button"
                        class="btn-bitrix-profile state-stale"
                        onclick="alert('–ó–∞–≥—Ä—É–∑–∫–∞ –∏–∑ –ø—Ä–æ—Ñ–∏–ª—è –ë–∏—Ç—Ä–∏–∫—Å!')"
                        title="–ó–∞–≥—Ä—É–∑–∏—Ç—å –§–ò–û, Email, –¢–µ–ª–µ—Ñ–æ–Ω –∏ –ö–æ–º–ø–∞–Ω–∏—é –∏–∑ –≤–∞—à–µ–≥–æ –ø—Ä–æ—Ñ–∏–ª—è –ë–∏—Ç—Ä–∏–∫—Å">
                    <span class="kp-avatar" aria-hidden="true">
                        <svg viewBox="0 0 24 24" width="18" height="18" fill="currentColor">
                            <path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4z"/>
                            <path d="M4 18c0-2.66 5.33-4 8-4s8 1.34 8 4v2H4v-2z"/>
                        </svg>
                    </span>
                    <span>–ó–∞–≥—Ä—É–∑–∏—Ç—å –∏–∑ –ø—Ä–æ—Ñ–∏–ª—è –ë–∏—Ç—Ä–∏–∫—Å</span>
                </button>
            </div>

            <div class="form-field">
                <label>–î–∞—Ç–∞ –ö–ü</label>
                <input type="date" value="2025-01-27">
            </div>
            <div class="form-field">
                <label>Email –º–µ–Ω–µ–¥–∂–µ—Ä–∞</label>
                <input type="email" placeholder="manager@example.com">
            </div>
            <div class="form-field">
                <label>–ö–ª–∏–µ–Ω—Ç—Å–∫–∞—è –∑–∞—è–≤–∫–∞</label>
                <input type="text" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ –æ—Ç—á—ë—Ç–∞">
            </div>
            <div class="form-field">
                <label>–û–±—ä–µ–∫—Ç</label>
                <input type="text" placeholder="–ê–¥—Ä–µ—Å –∏–ª–∏ –æ–ø–∏—Å–∞–Ω–∏–µ –æ–±—ä–µ–∫—Ç–∞">
            </div>
        </div>
    </div>

    <div class="test-info">
        <h3>üì± –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:</h3>
        <p>1. <strong>–ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É "–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ö–ü"</strong> - —Ñ–æ—Ä–º–∞ –¥–æ–ª–∂–Ω–∞ —Å–≤–µ—Ä–Ω—É—Ç—å—Å—è</p>
        <p>2. <strong>–ü—Ä–æ–≤–µ—Ä—å—Ç–µ:</strong> –∫–Ω–æ–ø–∫–∞ "–ó–∞–≥—Ä—É–∑–∏—Ç—å –∏–∑ –ø—Ä–æ—Ñ–∏–ª—è –ë–∏—Ç—Ä–∏–∫—Å" –¥–æ–ª–∂–Ω–∞ –∏—Å—á–µ–∑–Ω—É—Ç—å</p>
        <p>3. <strong>–ù–∞–∂–º–∏—Ç–µ —Å–Ω–æ–≤–∞</strong> - —Ñ–æ—Ä–º–∞ –¥–æ–ª–∂–Ω–∞ —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—å—Å—è, –∫–Ω–æ–ø–∫–∞ –ø–æ—è–≤–∏—Ç—å—Å—è</p>
        <p>4. <strong>–£–º–µ–Ω—å—à–∏—Ç–µ —à–∏—Ä–∏–Ω—É –±—Ä–∞—É–∑–µ—Ä–∞</strong> –¥–æ –º–æ–±–∏–ª—å–Ω–æ–≥–æ —Ä–∞–∑–º–µ—Ä–∞ –∏ –ø–æ–≤—Ç–æ—Ä–∏—Ç–µ —Ç–µ—Å—Ç</p>
    </div>

    <script>
        /* === KP Info toggler ‚Äî –ì–õ–û–ë–ê–õ–¨–ù–û === */
        (function () {
            const SECTION_ID = "kpInfoContent";
            const BTN_SEL = ".btn-kp-info-toggle";
            const LS_KEY = "kpInfoOpen";

            function getEls() {
                return {
                    section: document.getElementById(SECTION_ID),
                    btn: document.querySelector(BTN_SEL),
                };
            }

            function applyState(open) {
                const { section, btn } = getEls();
                if (!section || !btn) return;

                // –ò—Å–ø–æ–ª—å–∑—É–µ–º –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –∫–ª–∞—Å—Å—ã –∏–∑ HTML
                section.classList.toggle("kp-info-content--visible", open);
                section.classList.toggle("kp-info-content--hidden", !open);
                
                // –û–±–Ω–æ–≤–ª—è–µ–º —Å—Ç—Ä–µ–ª–∫—É
                const arrow = btn.querySelector('.toggle-arrow');
                if (arrow) {
                    arrow.style.transform = open ? 'rotate(0deg)' : 'rotate(-90deg)';
                }

                btn.setAttribute("aria-expanded", String(open));
                btn.setAttribute("aria-controls", SECTION_ID);

                try { localStorage.setItem(LS_KEY, open ? "1" : "0"); } catch (_) {}
            }

            function toggleKpInfo(force) {
                const { section } = getEls();
                if (!section) return;

                const wantOpen =
                    typeof force === "boolean" ? force : !section.classList.contains("kp-info-content--visible");

                applyState(wantOpen);
            }

            document.addEventListener("DOMContentLoaded", () => {
                const saved =
                    (typeof localStorage !== "undefined" && localStorage.getItem(LS_KEY)) || "0";
                applyState(saved === "1");
            });

            window.toggleKpInfo = toggleKpInfo; // ‚Üê –≥–ª–æ–±–∞–ª—å–Ω–æ
        })();
    </script>
</body>
</html>
